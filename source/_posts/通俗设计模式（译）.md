---
title: é€šä¿—è®¾è®¡æ¨¡å¼ï¼ˆè¯‘ï¼‰0
date: 2020-04-23 20:43:42
tags:
- translation
- design pattern
---

[åŸæ–‡ï¼šDesign Patterns for Humans](https://roadmap.sh/guides/design-patterns-for-humans)

è®¾è®¡æ¨¡å¼æ˜¯å¯¹åå¤å‡ºç°çš„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼›*è§£å†³æŸäº›é—®é¢˜çš„æŒ‡å—*ã€‚å®ƒä»¬ä¸æ˜¯åƒé­”æ³•ä¸€æ ·çš„ç±»ã€åŒ…æˆ–è€…åº“ã€‚è¿™ä¸ªæŒ‡å—è¯´çš„æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹å¦‚ä½•è§£å†³æŸäº›é—®é¢˜ã€‚

<!--more-->

> è®¾è®¡æ¨¡å¼æ˜¯å¯¹åå¤å‡ºç°çš„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚å¦‚ä½•è§£å†³æŸäº›é—®é¢˜çš„æŒ‡å—ã€‚

Wikipedia çš„æè¿°å¦‚ä¸‹ï¼š

> åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œè½¯ä»¶è®¾è®¡æ¨¡å¼æ˜¯å¯¹è½¯ä»¶è®¾è®¡ä¸­ç»™å®šä¸Šä¸‹æ–‡ä¸­å¸¸è§é—®é¢˜çš„é€šç”¨å¯é‡ç”¨è§£å†³æ–¹æ¡ˆã€‚å®ƒä¸æ˜¯å¯ä»¥ç›´æ¥è½¬æ¢ä¸ºæºä»£ç æˆ–æœºå™¨ç çš„æœ€ç»ˆè®¾è®¡ã€‚å®ƒæ˜¯ä¸€ç§æè¿°æˆ–æ¨¡æ¿ï¼Œç”¨äºåœ¨è®¸å¤šä¸åŒæƒ…å†µä¸‹è§£å†³é—®é¢˜ã€‚

## å°å¿ƒ

å¼€å‘äººå‘˜ï¼ˆå¤§å¤šæ˜¯åˆå­¦è€…ï¼‰çŠ¯äº†è¿‡åˆ†æ€è€ƒå’Œå¼ºåŠ è®¾è®¡æ¨¡å¼çš„é”™è¯¯ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ç¾éš¾ã€‚ç»éªŒæ³•åˆ™æ˜¯ä½¿ä»£ç åº“å°½å¯èƒ½ç®€å•ï¼Œä¸€æ—¦å¼€å§‹å¼€å‘ï¼Œä½ å°±èƒ½åœ¨ä»£ç åº“ä¸­çœ‹åˆ°é‡å¤æ¨¡å¼æ—¶ï¼Œå†æ‰§è¡Œç›¸å…³è®¾è®¡æ¨¡å¼ã€‚

- è®¾è®¡æ¨¡å¼ä¸æ˜¯é“¶å¼¹ã€‚ï¼ˆè¯‘æ³¨ï¼šé“¶å¼¹æŒ‡çš„æ˜¯ä¸‡èƒ½å·¥å…·ï¼‰
- ä¸è¦å¼ºè¡Œä½¿ç”¨ï¼Œä¸ç„¶æœ‰å¥½æœå­åƒã€‚
- è¯·è®°ä½ï¼Œè®¾è®¡æ¨¡å¼æ˜¯*è§£å†³*é—®é¢˜çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯*å‘ç°*é—®é¢˜çš„æ–¹æ¡ˆï¼Œä¸è¦æƒ³å¤ªå¤šã€‚
- ç”¨å¾—å¯¹æ—¶è¢«ç§°ä¸ºæ•‘æ˜Ÿï¼Œä¸ç„¶å°±æ˜¯ä»£ç æ··ä¹±ã€‚

> ä»£ç ç¤ºä¾‹ç”¨ PHP-7 ç¼–å†™ï¼Œä½†ä¸æ¯«ä¸å½±å“ä½ ç†è§£æ¦‚å¿µã€‚

## è®¾è®¡æ¨¡å¼çš„ç±»å‹

æœ¬æŒ‡å—å…³äº Gang of Four (Gof) è®¾è®¡æ¨¡å¼ï¼Œå‘½åæ¥è‡ª[ä»‹ç»äº†è¿™äº›è®¾è®¡æ¨¡å¼çš„è¿™æœ¬ä¹¦çš„å››ä½ä½œè€…](https://en.wikipedia.org/wiki/Design_Patterns)ã€‚è¿™æœ‰ä¸‰ç§è®¾è®¡æ¨¡å¼ï¼š

- [Creational](#åˆ›å»ºè®¾è®¡æ¨¡å¼) ï¼ˆåˆ›å»ºï¼‰
- [Structural](/2020/04/24/é€šä¿—è®¾è®¡æ¨¡å¼ï¼ˆè¯‘ï¼‰1) ï¼ˆç»“æ„ï¼‰
- [Behavioral](/2020/04/25/é€šä¿—è®¾è®¡æ¨¡å¼ï¼ˆè¯‘ï¼‰2) ï¼ˆè¡Œä¸ºï¼‰

## åˆ›å»ºè®¾è®¡æ¨¡å¼

ç®€è€Œè¨€ä¹‹

> åˆ›å»ºæ¨¡å¼ä¸“æ³¨äºå¦‚ä½•å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡æˆ–ä¸€ç»„å¯¹è±¡ã€‚

Wiki ç™¾ç§‘è¯´ï¼š

> è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œåˆ›å»ºè®¾è®¡æ¨¡å¼æ—¶å¤„ç†å¯¹è±¡åˆ›å»ºæœºåˆ¶çš„è®¾è®¡æ¨¡å¼ï¼Œå°è¯•ä»¥é€‚åˆçš„æ–¹å¼åˆ›å»ºå¯¹è±¡ã€‚å¯¹è±¡åˆ›å»ºçš„åŸºæœ¬å½¢å¼å¯èƒ½ä¼šå¯¼è‡´è®¾è®¡é—®é¢˜æˆ–è€…å¢åŠ è®¾è®¡çš„å¤æ‚æ€§ã€‚åˆ›å»ºè®¾è®¡æ¨¡å¼é€šè¿‡æŸç§æ–¹æ³•æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºæ¥è§£å†³æ­¤é—®é¢˜ã€‚

è¿™é‡Œæœ‰ 6 ç±»åˆ›å»ºæ¨¡å¼ï¼š

- [Simple Factory ç®€å•å·¥å‚](#ğŸ -ç®€å•å·¥å‚) 
- [Factory Method å·¥å‚æ–¹æ³•](#ğŸ­-å·¥å‚æ–¹æ³•) 
- [Abstract Factory æŠ½è±¡å·¥å‚](#ğŸ”¨-æŠ½è±¡å·¥å‚) 
- [Builder å»ºé€ è€…](#ğŸ‘·-å»ºé€ è€…) 
- [Prototype åŸå‹](#ğŸ‘-åŸå‹) 
- [Singleton å•ä¾‹](#ğŸ’-å•ä¾‹) 

### ğŸ  ç®€å•å·¥å‚

ç°å®ä¾‹å­

> è€ƒè™‘ä¸€ä¸‹ï¼Œä½ åœ¨ç›–æˆ¿å­ï¼Œéœ€è¦é—¨ã€‚ä½ å¯ä»¥ç©¿ä¸Šæœ¨åŒ è¡£æœï¼Œå¸¦ä¸Šæœ¨å¤´ã€èƒ¶æ°´ã€é’‰å­å’Œæ‰€æœ‰å¿…è¦çš„æ‰‡é—¨å·¥å…·ï¼Œç„¶åå¼€å§‹åœ¨æˆ¿å­é€ é—¨ã€‚æˆ–è€…ä½ åªè¦æ‰“ä¸ªç”µè¯ç»™å·¥å‚ï¼Œç„¶åä»–ä»¬æŠŠé€ å¥½çš„é—¨ç»™ä½ ï¼Œè¿™æ ·ä½ å°±ä¸éœ€è¦äº†è§£ä»»ä½•é€ é—¨çš„é¢å¤–çŸ¥è¯†äº†ã€‚

ç®€è€Œè¨€ä¹‹

> ç®€å•å·¥å‚åªéœ€è¦ä¸ºä½¿ç”¨è€…ç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸éœ€è¦ä¸ºä½¿ç”¨è€…å…¬å¼€ä»»ä½•å®ä¾‹åŒ–çš„é€»è¾‘ã€‚

ç»´åŸºè¯´

> é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ä¸­ï¼Œå·¥å‚æ—¶ç”¨äºåˆ›å»ºå…¶ä»–å¯¹è±¡çš„å¯¹è±¡ â€”â€” æ­£å¼è¯´æ³•æ˜¯ï¼Œå·¥å‚æ˜¯ä¸€ç§å‡½æ•°æˆ–æ–¹æ³•ï¼Œå®ƒä»æŸä¸ªæ–¹æ³•ï¼ˆå‡å®šä¸º â€œnewâ€ï¼‰è°ƒç”¨å¹¶è¿”å›ä¸åŒåŸå‹æˆ–ç±»çš„å¯¹è±¡ã€‚

**ç¨‹åºç¤ºä¾‹**

é¦–å…ˆæˆ‘ä»¬æœ‰ä¸ªé—¨çš„æ¥å£å’Œå…¶å®ç°

```php
interface Door
{
    public function getWidth(): float;
    public function getHeight(): float;
}

class WoodenDoor implements Door
{
    protected $width;
    protected $height;

    public function __construct(float $width, float $height)
    {
        $this->width = $width;
        $this->height = $height;
    }

    public function getWidth(): float
    {
        return $this->width;
    }

    public function getHeight(): float
    {
        return $this->height;
    }
}
```

ç„¶åæˆ‘ä»¬æœ‰ä¸ªé—¨å·¥å‚æ¥åˆ¶é€ é—¨å¹¶è¿”å›å®ƒ

```php
class DoorFactory
{
    public static function makeDoor($width, $height): Door
    {
        return new WoodenDoor($width, $height);
    }
}
```

ç„¶åå°±å¯ä»¥è¿™æ ·ç”¨

```php
// ç»™æˆ‘é€ ä¸€æ‰‡ 100*200 å°ºå¯¸çš„é—¨
$door = DoorFactory::makeDoor(100, 200);

echo 'Width: ' . $door->getWidth();
echo 'Height: ' . $door->getHeight();

// ç»™æˆ‘é€ ä¸€æ‰‡ 50*100 å°ºå¯¸çš„é—¨
$door2 = DoorFactory::makeDoor(50, 100);
```

**å•¥æ—¶å€™ç”¨å‘¢ï¼Ÿ**

åˆ›å»ºå¯¹è±¡æ—¶ï¼Œä¸ä»…è¦å¤åˆ¶ï¼Œè¿˜è¦æ‰§è¡Œä¸€äº›é€»è¾‘æ“ä½œï¼Œè¿™äº›ä»£ç æ”¾åˆ°ä¸“é—¨çš„â€œå·¥å‚â€é‡Œç›¸æ¯”å››å¤„å¤åˆ¶ç²˜è´´ç›¸åŒä»£ç æ˜¯æ›´æœ‰æ„ä¹‰çš„ã€‚

### ğŸ­ å·¥å‚æ–¹æ³•

ç°å®ä¾‹å­

> æ€è€ƒä¸€ä¸ªæ‹›è˜ç»ç†çš„ä¾‹å­ï¼Œä¸€ä¸ªäººä¸å¯èƒ½å¯¹æ¯ä¸ªèŒä½è¿›è¡Œé¢è¯•ã€‚æ ¹æ®èŒä½ç©ºç¼ºï¼Œå¥¹å¿…é¡»å†³å®šé¢è¯•æ­¥éª¤ç„¶åå°†å…¶å§”æ‰˜ç»™å…¶ä»–äººã€‚

ç®€è€Œè¨€ä¹‹

> å®ƒæä¾›äº†ä¸€ç§å°†å®ä¾‹åŒ–é€»è¾‘å§”æ‰˜ç»™å­ç±»çš„æ–¹æ³•ã€‚

ç»´åŸºè¯´

> åŸºäºç±»çš„ç¼–ç¨‹ä¸­ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºæ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä½¿ç”¨å·¥å‚æ–¹æ³•æ¥å¤„ç†åˆ›å»ºå¯¹è±¡çš„é—®é¢˜ï¼Œè€Œä¸å¿…æŒ‡å®šå°†è¦åˆ›å»ºå¯¹è±¡çš„ç¡®åˆ‡ç±»ã€‚è¿™æ˜¯é€šè¿‡è°ƒç”¨å·¥å‚æ–¹æ³•åˆ›å»ºå¯¹è±¡æ¥å®Œæˆçš„ã€‚è¯¥æ–¹æ³•åœ¨æ¥å£ä¸­æŒ‡å®šå¹¶åˆå­ç±»å®ç°ï¼Œæˆ–è€…åœ¨åŸºç±»ä¸­å®ç°ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©ç”±æ´¾ç”Ÿç±»è¦†ç›–ï¼Œè€Œä¸æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°æ¥è¦†ç›–ã€‚

**ç¨‹åºç¤ºä¾‹**

ä»¥æˆ‘ä»¬ä¸Šæ–‡çš„æ‹›è˜ç»ç†ä¸ºä¾‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªé¢è¯•å®˜æ¥å£åŠå…¶å®ç°

```php
interface Interviewer
{
    public function askQuestions();
}

class Developer implements Interviewer
{
    public function askQuestions()
    {
        echo 'Asking about design patterns!';
    }
}

class CommunityExecutive implements Interviewer
{
    public function askQuestions()
    {
        echo 'Asking about community building';
    }
}
```

ç°åœ¨é€ ä¸€ä¸ªæ‹›è˜ç»ç†ï¼ˆHiringManagerï¼‰

```php
abstract class HiringManager
{

    // å·¥å‚æ–¹æ³•
    abstract protected function makeInterviewer(): Interviewer;

    public function takeInterview()
    {
        $interviewer = $this->makeInterviewer();
        $interviewer->askQuestions();
    }
}
```

ç°åœ¨ï¼Œä»»ä½•å­ç±»éƒ½å¯æ‰©å±•å®ƒå¹¶æä¾›æ‰€éœ€è¦çš„é¢è¯•å®˜

```php
class DevelopmentManager extends HiringManager
{
    protected function makeInterviewer(): Interviewer
    {
        return new Developer();
    }
}

class MarketingManager extends HiringManager
{
    protected function makeInterviewer(): Interviewer
    {
        return new CommunityExecutive();
    }
}
```

è¿™æ ·ç”¨

```php
$devManager = new DevelopmentManager();
$devManager->takeInterview(); // Output: Asking about design patterns

$marketingManager = new MarketingManager();
$marketingManager->takeInterview(); // Output: Asking about community building.
```

**å•¥æ—¶å€™ç”¨å‘¢ï¼Ÿ**

å½“ç±»ä¸­æœ‰ä¸€äº›é€šç”¨å¤„ç†ä½†æ‰€éœ€çš„å­ç±»åœ¨è¿è¡Œæ—¶åŠ¨æ€ç¡®å®šæ—¶å¾ˆæœ‰ç”¨ã€‚æˆ–è€…æ¢å¥è¯è¯´ï¼Œç”¨æˆ·ä¸çŸ¥é“å®ƒå¯èƒ½éœ€è¦ä»€ä¹ˆç¡®åˆ‡çš„å­ç±»ã€‚

### ğŸ”¨ æŠ½è±¡å·¥å‚

ç°å®ä¾‹å­

> ä»ç®€å•å·¥å‚æ‰©å±•äº†æˆ‘ä»¬çš„é—¨ã€‚æ ¹æ®ä½ çš„éœ€æ±‚ï¼Œ ä½ å¯èƒ½ä»ä¸€å®¶æœ¨é—¨åº—ä¹°åˆ°ä¸€æ‰‡é—¨ï¼Œæˆ–è€…åœ¨é“é—¨åº—ä¹°åˆ°ä¸€æ‰‡é“é—¨ï¼Œæˆ–è€…ç›¸å…³çš„åº—ä¹°åˆ° PVC é—¨ã€‚å¦å¤–ï¼Œä½ å¯èƒ½éœ€è¦ä¸€ä¸ªå…·æœ‰ä¸åŒä¸“ä¸šæŠ€èƒ½çš„äººæ¥å®‰è£…ä¸åŒçš„é—¨ï¼Œä¾‹å¦‚ï¼Œæœ¨é—¨çš„æœ¨åŒ ï¼Œé“é—¨çš„ç„Šæ¥å·¥ç­‰ã€‚å¦‚ä½ æ‰€è§ï¼Œç°åœ¨é—¨ä¹‹é—´å­˜åœ¨ä¾èµ–æ€§ï¼Œæœ¨é—¨éœ€è¦æœ¨åŒ ï¼Œé“é—¨éœ€è¦ç„Šæ¥å·¥ç­‰ã€‚

ç®€è€Œè¨€ä¹‹

> å·¥å‚çš„å·¥å‚ï¼›ä¸€ä¸ªå°†ç›¸å…³æˆ–ä»å±çš„å·¥å‚åˆ†ç»„åœ¨ä¸€èµ·ï¼Œä½†ä¸æŒ‡å®šå…¶å…·ä½“ç±»åˆ«çš„å·¥å‚ã€‚

ç»´åŸºè¯´

> æŠ½è±¡å·¥å‚æ¨¡å¼æä¾›äº†ä¸€ç§æ–¹æ³•æ¥å°è£…ä¸€ç»„å…·æœ‰å…±åŒä¸»é¢˜çš„å•ä¸ªå·¥å‚ï¼Œè€Œæ— éœ€æŒ‡å®šå…¶å…·ä½“ç±»ã€‚

**ç¨‹åºç¤ºä¾‹**

è½¬æ¢ä¸Šé¢é—¨çš„ä¾‹å­ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰é—¨çš„æ¥å£ä½•å…¶å®ç°

```php
interface Door
{
    public function getDescription();
}

class WoodenDoor implements Door
{
    public function getDescription()
    {
        echo 'I am a wooden door';
    }
}

class IronDoor implements Door
{
    public function getDescription()
    {
        echo 'I am an iron door';
    }
}
```

ç„¶åæˆ‘ä»¬ä¸ºæ¯ç§é—¨é…å¤‡ä¸€äº›è£…ä¿®ä¸“å®¶

```php
interface DoorFittingExpert
{
    public function getDescription();
}

class Welder implements DoorFittingExpert
{
    public function getDescription()
    {
        echo 'I can only fit iron doors';
    }
}

class Carpenter implements DoorFittingExpert
{
    public function getDescription()
    {
        echo 'I can only fit wooden doors';
    }
}
```

ç°åœ¨æˆ‘ä»¬æœ‰äº†æŠ½è±¡å·¥å‚ï¼Œå®ƒå°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿåˆ¶é€ ä¸€ç³»åˆ—å¯¹è±¡ï¼Œå³æœ¨é—¨å·¥å‚å°†åˆ›å»ºæœ¨é—¨å’Œæœ¨é—¨é…ä»¶ä¸“å®¶ï¼Œé“é—¨å·¥å‚å°†åˆ›å»ºé“é—¨å’Œé“é—¨é…ä»¶ä¸“å®¶ã€‚

```php
interface DoorFactory
{
    public function makeDoor(): Door;
    public function makeFittingExpert(): DoorFittingExpert;
}

// æœ¨é—¨å·¥å‚è¿”å›æœ¨åŒ å’Œæœ¨é—¨
class WoodenDoorFactory implements DoorFactory
{
    public function makeDoor(): Door
    {
        return new WoodenDoor();
    }

    public function makeFittingExpert(): DoorFittingExpert
    {
        return new Carpenter();
    }
}

// é“é—¨å·¥å‚è¿”å›é“é—¨å’Œç›¸å…³çš„è£…é…ä¸“å®¶
class IronDoorFactory implements DoorFactory
{
    public function makeDoor(): Door
    {
        return new IronDoor();
    }

    public function makeFittingExpert(): DoorFittingExpert
    {
        return new Welder();
    }
}
```

æ¥ç€è¿™ä¹ˆç”¨

```php
$woodenFactory = new WoodenDoorFactory();

$door = $woodenFactory->makeDoor();
$expert = $woodenFactory->makeFittingExpert();

$door->getDescription();  // Output: I am a wooden door
$expert->getDescription(); // Output: I can only fit wooden doors

// Same for Iron Factory
$ironFactory = new IronDoorFactory();

$door = $ironFactory->makeDoor();
$expert = $ironFactory->makeFittingExpert();

$door->getDescription();  // Output: I am an iron door
$expert->getDescription(); // Output: I can only fit iron doors
```

å¦‚ä½ æ‰€è§ï¼Œæœ¨é—¨å·¥å‚å·²ç»å°è£…äº†æœ¨åŒ ï¼ˆcarpenterï¼‰å’Œæœ¨é—¨ï¼ˆwooden doorï¼‰ï¼Œé“é—¨å·¥å‚å·²ç»å°è£…äº†é“é—¨ï¼ˆiron doorï¼‰å’Œç„Šæ¥å·¥ï¼ˆwelderï¼‰ã€‚å› æ­¤ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬ç¡®ä¿å¯¹äºæ¯ä¸ªå·²åˆ›å»ºçš„é—¨ä¸ä¼šé‡åˆ°é”™è¯¯çš„è£…é…ä¸“å®¶ã€‚

**å•¥æ—¶å€™ç”¨å‘¢?**

å½“å­˜åœ¨ç›¸äº’å…³è”çš„ä¾èµ–å…³ç³»å¹¶ä¸”æ¶‰åŠåˆ°ä¸ç®€å•çš„åˆ›å»ºé€»è¾‘æ—¶ã€‚

### ğŸ‘· å»ºé€ è€…

æ˜¾ç¤ºä¾‹å­

> åŠ å…¥ä½ åœ¨ Hardee åº—é‡Œä¸‹äº†ä¸€ç¬”è®¢å•ï¼Œä»–ä»¬ä¼šæ¯«æ— ç–‘é—®çš„å°†è´§å“äº¤ç»™ä½ ï¼›è¿™æ˜¯ç®€å•å·¥å‚çš„ä¾‹å­ã€‚ä½†æ˜¯æŸäº›æƒ…å†µä¸‹ï¼Œåˆ›å»ºé€»è¾‘å¯èƒ½è®¾è®¡æ›´å¤šçš„æ­¥éª¤ã€‚ä¾‹å¦‚ï¼Œä½ æƒ³è¦å®šåˆ¶èµ›ç™¾å‘³çš„è®¢å•ï¼Œåœ¨æ±‰å ¡çš„åˆ¶ä½œæ–¹å¼ä¸Šæœ‰å¤šç§é€‰æ‹©ï¼Œä¾‹å¦‚ï¼šä½ æƒ³è¦å“ªç§é¢åŒ…ï¼Ÿæƒ³è¦é‚£ç§è°ƒå‘³æ–™ï¼Ÿé‚£ç§å¥¶é…ªï¼Ÿç­‰ç­‰ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå»ºé€ è€…æ¨¡å¼åº”è¿è€Œç”Ÿã€‚

ç®€è€Œè¨€ä¹‹

> å…è®¸ä½ åˆ›å»ºå¯¹è±¡çš„ä¸åŒæ ·å¼ï¼ŒåŒæ—¶é¿å…æ„é€ å‡½æ•°æ±¡æŸ“ã€‚å½“ä¸€ä¸ªå¯¹è±¡æœ‰å¤šç§é£æ ¼æ—¶å¾ˆæœ‰ç”¨ï¼Œäº¦æˆ–è€…åˆ›å»ºå¯¹è±¡æ¶‰åŠå¾ˆå¤šæ­¥éª¤æ—¶ã€‚

ç»´åŸºè¯´

> å»ºé€ è€…æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡åˆ›å»ºè½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œæ—¨åœ¨ä¸ºä¼¸ç¼©æ„é€ å™¨åæ¨¡å¼æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚

è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯ä¼¸ç¼©æ„é€ å™¨åæ¨¡å¼ã€‚æœ‰æ—¶æˆ‘ä»¬è§è¿‡ä»¥ä¸‹æ„é€ å‡½æ•°ï¼š

```php
public function __construct($size, $cheese = true, $pepperoni = true, $tomato = false, $lettuce = true)
{
}
```

å¦‚ä½ æ‰€è§ï¼Œæ„é€ å‡½æ•°å‚æ•°çš„æ•°é‡å¾ˆå¿«ä¼šå¤±æ§ï¼Œè¿‡å¤šçš„å‚æ•°çœ‹ç€ä¼šå¾ˆå¤´å¤§ã€‚å¦å¤–ï¼Œå¦‚æœä½ æƒ³æ·»åŠ æ›´å¤šé€‰é¡¹ï¼Œåˆ™æ­¤å‚æ•°åˆ—è¡¨è¿˜ç»§ç»­å¢é•¿ã€‚è¿™å°±æ˜¯ä¼¸ç¼©æ„é€ å‡½æ•°åæ¨¡å¼ã€‚

**ç¨‹åºç¤ºä¾‹**

æ˜æ™ºçš„åšæ³•æ˜¯ä½¿ç”¨æ„é€ å™¨æ¨¡å¼ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¦åšæ±‰å ¡

```php
class Burger
{
    protected $size;

    protected $cheese = false;
    protected $pepperoni = false;
    protected $lettuce = false;
    protected $tomato = false;

    public function __construct(BurgerBuilder $builder)
    {
        $this->size = $builder->size;
        $this->cheese = $builder->cheese;
        $this->pepperoni = $builder->pepperoni;
        $this->lettuce = $builder->lettuce;
        $this->tomato = $builder->tomato;
    }
}
```

æ¥ç€æ˜¯æˆ‘ä»¬çš„å»ºé€ è€…


```php
class BurgerBuilder
{
    public $size;

    public $cheese = false;
    public $pepperoni = false;
    public $lettuce = false;
    public $tomato = false;

    public function __construct(int $size)
    {
        $this->size = $size;
    }

    public function addPepperoni()
    {
        $this->pepperoni = true;
        return $this;
    }

    public function addLettuce()
    {
        $this->lettuce = true;
        return $this;
    }

    public function addCheese()
    {
        $this->cheese = true;
        return $this;
    }

    public function addTomato()
    {
        $this->tomato = true;
        return $this;
    }

    public function build(): Burger
    {
        return new Burger($this);
    }
}
```

è¿™ä¹ˆç”¨

```php
$burger = (new BurgerBuilder(14))
                    ->addPepperoni()
                    ->addLettuce()
                    ->addTomato()
                    ->build();
```

**å•¥æ—¶å€™ç”¨å‘¢ï¼Ÿ**

å½“å¯¹è±¡çš„é…ç½®é¡¹è¿‡å¤šï¼Œä¸ºäº†é¿å…ä¼¸ç¼©æ„é€ å‡½æ•°æ˜¯ï¼Œè¿™ä¸å·¥å‚æ¨¡å¼çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼šå½“åˆ›å»ºæ˜¯ä¸€æ­¥è¿‡ç¨‹æ—¶ï¼Œä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œè€Œåˆ›å»ºæ˜¯å¤šæ­¥è¿‡ç¨‹æ˜¯ï¼Œå°†ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ã€‚

### ğŸ‘ åŸå‹

ç°å®ä¾‹å­

> è®°å¾—å¤šåˆ©å—ï¼Ÿé‚£åªå…‹éš†ç¾Šï¼ä¸è°ˆç»†èŠ‚ï¼Œå…³é”®æ˜¯å…‹éš†ã€‚

ç®€è€Œè¨€ä¹‹

> é€šè¿‡å…‹éš†åŸºäºç°æœ‰å¯¹è±¡åˆ›å»ºå¯¹è±¡ã€‚

ç»´åŸºè¯´

> åŸå‹æ¨¡å¼æ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ç§åˆ›å»ºè®¾è®¡æ¨¡å¼ã€‚å½“è¦åˆ›å»ºçš„å¯¹è±¡ç”±åŸå‹ç¤ºä¾‹ç¡®å®šæ—¶ä½¿ç”¨ï¼Œè¯¥å®ä¾‹è¢«å…‹éš†ä»¥ç”Ÿæˆæ–°å¯¹è±¡ã€‚

ç®€è€Œè¨€ä¹‹ï¼Œå®ƒä½¿ä½ å¯ä»¥åˆ›å»ºç°æœ‰å¯¹è±¡çš„å‰¯æœ¬å¹¶æ ¹æ®éœ€è¦å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œè€Œä¸å¿…éº»çƒ¦ä»å¤´å¼€å§‹åˆ›å»ºå¯¹è±¡å¹¶è®¾ç½®ã€‚

**ç¨‹åºå®ä¾‹**

åœ¨ PHP ä¸­ï¼Œç”¨ `clone` å¾ˆå®¹æ˜“åšåˆ°

```php
class Sheep
{
    protected $name;
    protected $category;

    public function __construct(string $name, string $category = 'Mountain Sheep')
    {
        $this->name = $name;
        $this->category = $category;
    }

    public function setName(string $name)
    {
        $this->name = $name;
    }

    public function getName()
    {
        return $this->name;
    }

    public function setCategory(string $category)
    {
        $this->category = $category;
    }

    public function getCategory()
    {
        return $this->category;
    }
}
```

å…‹éš†æ–¹å¼å¦‚ä¸‹

```php
$original = new Sheep('Jolly');
echo $original->getName(); // Jolly
echo $original->getCategory(); // Mountain Sheep

// Clone and modify what is required
$cloned = clone $original;
$cloned->setName('Dolly');
echo $cloned->getName(); // Dolly
echo $cloned->getCategory(); // Mountain sheep
```

ä½ è¿˜å¯ä»¥ä½¿ç”¨é­”æ³•æ–¹æ³• `__clone` æ–¹æ³•ä¿®æ”¹å…‹éš†è¡Œä¸ºã€‚

**å•¥æ—¶å€™ç”¨å‘¢ï¼Ÿ**

å½“éœ€è¦ä¸€ä¸ªä¸ç°æœ‰å¯¹è±¡ç›¸ä¼¼çš„å¯¹è±¡æ—¶ï¼Œæˆ–è€…ä¸å…‹éš†ç›¸æ¯”åˆ›å»ºæˆæœ¬å¾ˆé«˜ã€‚

### ğŸ’ å•ä¾‹

ç°å®ä¾‹å­

> ä¸€ä¸ªå›½å®¶ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä½æ€»ç»Ÿã€‚æ¯æ¬¡æ¥å¬å€¼ç­ç”µè¯çš„éƒ½æ˜¯åŒä¸€ä½æ€»ç»Ÿã€‚æ€»ç»Ÿåœ¨è¿™é‡Œå°±æ˜¯å•ä¾‹ã€‚

ç®€è€Œè¨€ä¹‹

> ç¡®ä¿ä»…åˆ›å»ºç‰¹å®šç±»çš„ä¸€ä¸ªå¯¹è±¡ã€‚

ç»´åŸºè¯´

> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œå•ä¾‹æ¨¡å¼æ—¶ä¸€ç§å°†ç±»çš„å®ä¾‹åŒ–é™åˆ¶ä¸ºä¸€ä¸ªå¯¹è±¡çš„è½¯ä»¶è®¾è®¡æ¨¡å¼ã€‚å½“ä»…éœ€è¦ä¸€ä¸ªå¯¹è±¡æ¥åè°ƒæ•´ä¸ªç³»ç»Ÿä¸­çš„åŠ¨ä½œæ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚

å•ä¾‹æ¨¡å¼å®é™…ä¸Šè¢«è®¤ä¸ºæ˜¯åæ¨¡å¼ï¼Œåº”é¿å…è¿‡åº¦ä½¿ç”¨å®ƒã€‚å®ƒä¸ä¸€å®šæ˜¯åçš„ï¼Œå¹¶ä¸”å¯èƒ½æœ‰ä¸€äº›æœ‰æ•ˆçš„ä½¿ç”¨åœºæ™¯ä½†æ˜¯åº”è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¼šåœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­å¼•å…¥å…¨å±€çŠ¶æ€ï¼Œå¹¶ä¸”åœ¨åŒä¸€ä¸ªä½ç½®è¿›è¡Œæ›´æ”¹å¯èƒ½ä¼šå½±å“å…¶ä»–åŒºåŸŸï¼Œè¿™è®©è°ƒè¯•å˜å¾—éå¸¸å›°éš¾ã€‚å…³äºå®ƒä»¬çš„å¦ä¸€ä¸ªä¸å¥½çš„åœ°æ–¹æ˜¯ï¼Œå®ƒä¼šä½¿ä½ çš„ä»£ç é«˜è€¦åˆï¼Œéš¾ä»¥æ¨¡æ‹Ÿå•ä¾‹ã€‚

**ç¨‹åºç¤ºä¾‹**

è¦åˆ›å»ºå•ä¾‹ï¼Œè¯·å°†æ„é€ å‡½æ•°è®¾ä¸ºç§æœ‰ï¼Œç¦ç”¨å…‹éš†ï¼Œç¦ç”¨æ‰©å±•ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªé™æ€å˜é‡æ¥å®¹çº³å®ä¾‹ã€‚

```php
final class President
{
    private static $instance;

    private function __construct()
    {
        // Hide the constructor
    }

    public static function getInstance(): President
    {
        if (!self::$instance) {
            self::$instance = new self();
        }

        return self::$instance;
    }

    private function __clone()
    {
        // Disable cloning
    }

    private function __wakeup()
    {
        // Disable unserialize
    }
}
```

æ¥ç€æ˜¯ä½¿ç”¨

```php
$president1 = President::getInstance();
$president2 = President::getInstance();

var_dump($president1 === $president2); // true
```

