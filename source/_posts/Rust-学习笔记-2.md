---
title: Rust 学习笔记 2
date: 2020-03-30 23:39:35
tags:
- rust
---

阅读 [《 Rust 程序设计》](https://doc.rust-lang.org/book)的一些笔记。

变量。

<!--more-->

## 变量和可变性

Rust 中的变量默认为不可变的。

只要变量定义未加上 `mut` ，它在程序中就不用担心它被改变。

对于大数据结构，加上 `mut` ，可以直接操作实例，比复制并返回新实例肯定要快。

但是对于小数据结构，创建新的实例或者更多函数式编程风格更容易被理解，所以略低的性能在提高程序可读性时是值得的。

## 变量（variables）和常量（constants）的区别

常量是绑定到名称且不允许更改的值。但是常量和不可变量还是有一些区别。

首先，不允许将 `mut` 和常量一起使用，默认情况下，常量不仅不可变，它们始终不可变。

使用 `const` 关键字定义常量而不是 `let` 关键字，并且必须注释值得类型。

常量可以在任何范围（scope）中声明，包括全局范围。

最后一个不同，常量只能设置未常量表达式，不能设置未函数调用结果或者只能在运行时计算的任何其他值。

例如：

```rust
const MAX_POINTS: u32 = 100_000;
```

> 在数字文本中插入下划线，可以提高可读性。

## 隐藏（Shadowing）

我们可以通过使用相同变量的名称并重复使用 `let` 关键字来隐藏变量。

隐藏和将变量标记为 `mut` 不同，因为一旦忘记使用 `let` 重新分配变量，就会在编译时报错。通过使用 `let` ，我们可以对一个值执行一些转换，但是在转换完成后，变量是不可变的。

`mut` 和 shadowing 的另一个不同是，使用 `let` 关键字实际是创建了一个新的变量，但是可以重用名称。
