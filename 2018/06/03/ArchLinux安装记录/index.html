<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#222">
  <link rel="manifest" href="/images/site.webmanifest">
  <meta name="msapplication-config" content="/images/browserconfig.xml">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.cnpmjs.org/css?family=Lato:300,300italic,400,400italic,700,700italic|Inconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://www.findshank.com').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"flat"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":true,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: true,
    comments: {"style":"tabs","active":"livere","storage":true,"lazyload":true,"nav":null,"activeClass":"livere"},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":5,"unescape":true,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="本教程在EFI启动的Windows10台式机上完成。   Arch Linux 2018.06.01 iso，官网下载 USB Driver &amp;gt; 1G Etcher 官网下载">
<meta name="keywords" content="Linux,Arch">
<meta property="og:type" content="article">
<meta property="og:title" content="ArchLinux安装记录">
<meta property="og:url" content="https://www.findshank.com/2018/06/03/ArchLinux安装记录/index.html">
<meta property="og:site_name" content="Shank&#39;s Notes">
<meta property="og:description" content="本教程在EFI启动的Windows10台式机上完成。   Arch Linux 2018.06.01 iso，官网下载 USB Driver &amp;gt; 1G Etcher 官网下载">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-04-02T14:48:36.252Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ArchLinux安装记录">
<meta name="twitter:description" content="本教程在EFI启动的Windows10台式机上完成。   Arch Linux 2018.06.01 iso，官网下载 USB Driver &amp;gt; 1G Etcher 官网下载">

<link rel="canonical" href="https://www.findshank.com/2018/06/03/ArchLinux安装记录/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>ArchLinux安装记录 | Shank's Notes</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-128359433-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-128359433-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Shank's Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Code & Tech & Life</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="Searching..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.findshank.com/2018/06/03/ArchLinux安装记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="sko00o">
      <meta itemprop="description" content="Nothing or Anything">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shank's Notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ArchLinux安装记录<a href="https://github.com/sko00o/sko00o.github.io/edit/hexo/source/_posts/ArchLinux安装记录.md" class="post-edit-link" title="Edit this post" rel="noopener" target="_blank"><i class="fa fa-pencil"></i></a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-06-03 13:25:05" itemprop="dateCreated datePublished" datetime="2018-06-03T13:25:05+08:00">2018-06-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-02 22:48:36" itemprop="dateModified" datetime="2020-04-02T22:48:36+08:00">2020-04-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="firestore-visitors-count"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>本教程在EFI启动的Windows10台式机上完成。</p>
</blockquote>
<ol>
<li>Arch Linux 2018.06.01 iso，<a href="https://www.archlinux.org/download/" target="_blank" rel="noopener">官网下载</a></li>
<li>USB Driver &gt; 1G</li>
<li>Etcher <a href="https://etcher.io/" target="_blank" rel="noopener">官网下载</a></li>
</ol>
<a id="more"></a>
<h2 id="系统安装"><a href="#系统安装" class="headerlink" title="系统安装"></a>系统安装</h2><h3 id="预留空间"><a href="#预留空间" class="headerlink" title="预留空间"></a>预留空间</h3><p>使用 Windows 的磁盘管理工具压缩分区卷，不要格式化。(我预留的空间为60G。)</p>
<h3 id="U盘启动"><a href="#U盘启动" class="headerlink" title="U盘启动"></a>U盘启动</h3><ol>
<li>使用Etcher将Arch安装盘写入U盘</li>
<li>重启电脑启动到U盘系统</li>
<li>你将看到 <code>root@archiso ~ #</code></li>
</ol>
<h3 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h3><p>查看分区表。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br></pre></td></tr></table></figure>
<p>记录以下分区标识。</p>
<ol>
<li><code>EFI System</code> 分区，此处以 <code>/dev/sda1</code> 为例。</li>
<li>将要安装 Arch Linux 的硬盘，此处以 <code>/dev/sdb</code> 为例。</li>
<li>找到之前预留的空间，此处以 <code>/dev/sdb2</code> 为例。</li>
</ol>
<p>使用新手分区工具 <code>cfdisk</code>。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfdisk /dev/sdb</span><br></pre></td></tr></table></figure>
<p>上下移动选择到 <code>Free Space</code>，左右移动选择到 <code>New</code>，分配与内存等大小的Swap分区，此处输入 <code>8G</code>，然后回车确认。再选择 <code>Type</code>，分区类型求改为 <code>Linux swap</code>。（当然也可以不分交换分区）</p>
<p>再次选择剩余的 <code>Free Space</code>，分出 <code>/</code>和<code>/home</code>。（因人而异，为了方便，我剩下的只分一个区，类型为 <code>Linux filesystem</code>）</p>
<p>最后选择 <code>Write</code>，输入 <code>yes</code>，再选择 <code>Quit</code>，退出分区工具。</p>
<p>再次 <code>fdisk -l</code> 查看新的分区表，记录新创建的分区标识。</p>
<p>此处以 8G的 <code>/dev/sdb2</code> 和 52G的 <code>/dev/sdb4</code> 为例。</p>
<p>也可以使用下面命令将新分区格式化。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext4 /dev/sdb4</span><br><span class="line">mkswap /dev/sdb2</span><br></pre></td></tr></table></figure>
<h2 id="安装系统"><a href="#安装系统" class="headerlink" title="安装系统"></a>安装系统</h2><h3 id="挂载分区"><a href="#挂载分区" class="headerlink" title="挂载分区"></a>挂载分区</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linux filesystem</span></span><br><span class="line">mount /dev/sdb4 /mnt</span><br><span class="line"><span class="comment"># EFI system</span></span><br><span class="line">mkdir -p /mnt/boot/efi</span><br><span class="line">mount /dev/sda1 /mnt/boot/efi</span><br><span class="line"><span class="comment"># Linux swap</span></span><br><span class="line">swapon /dev/sdb2</span><br></pre></td></tr></table></figure>
<h3 id="配置镜像源"><a href="#配置镜像源" class="headerlink" title="配置镜像源"></a>配置镜像源</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/pacman.d</span><br><span class="line">mv ./mirrorlist ./mirrorlist.bak</span><br><span class="line">touch mirrorlist</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'Server = http://mirrors.163.com/archlinux/$repo/os/$arch'</span> &gt; ./mirrorlist</span><br></pre></td></tr></table></figure>
<h3 id="联网"><a href="#联网" class="headerlink" title="联网"></a>联网</h3><p>有线连接可跳过这步，无线连接使用以下命令找到Ｗi-Fi，找到并输入密码即可。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wifi-menu</span><br></pre></td></tr></table></figure>
<h3 id="开始安装配置"><a href="#开始安装配置" class="headerlink" title="开始安装配置"></a>开始安装配置</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置系统时间</span></span><br><span class="line">timedatectl <span class="built_in">set</span>-ntp <span class="literal">true</span></span><br><span class="line"><span class="comment"># 刷新本地数据库</span></span><br><span class="line">pacman -Syy</span><br><span class="line"><span class="comment"># 安装基础系统</span></span><br><span class="line">pacstrap -i /mnt base base-devel</span><br><span class="line"></span><br><span class="line"><span class="comment"># 回车两次然后输入y之后等一会……</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成 fstab 文件</span></span><br><span class="line">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span><br><span class="line"><span class="comment"># 切换到已安装的ArchLinux</span></span><br><span class="line">arch-chroot /mnt</span><br><span class="line"><span class="comment"># 设置时区</span></span><br><span class="line">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line"><span class="comment"># 时钟设置 使用UTC会导致双系统时间不同 此处用可以用localtime</span></span><br><span class="line">hwclock --systohc -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 网络</span></span><br><span class="line">pacman -S iw wpa_supplicant dialog</span><br><span class="line"><span class="comment"># 字体</span></span><br><span class="line">pacman -S ttf-dejavu wqy-microhei wqy-zenhei</span><br><span class="line"><span class="comment"># 音频</span></span><br><span class="line">pacman -S alsa-utils</span><br><span class="line"><span class="comment"># vim &amp; ssh</span></span><br><span class="line">pacman -S vim openssh</span><br><span class="line"><span class="comment"># 引导工具</span></span><br><span class="line">pacman -S dosfstools grub efibootmgr os-prober</span><br><span class="line">grub-install --efi-directory=/boot/efi --bootloader-id=ArchLinux --recheck</span><br><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br><span class="line"><span class="comment"># P.S忽略执行 grub-mkconfig 下方的错误，前几行包含 Found XXX.img 就行</span></span><br></pre></td></tr></table></figure>
<h3 id="本地化"><a href="#本地化" class="headerlink" title="本地化"></a>本地化</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/locale.gen</span><br></pre></td></tr></table></figure>
<p>删除下面四句前面的<code>#</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#en_US.UTF-8 UTF-8</span></span><br><span class="line"><span class="comment">#zh_CN.GBK GBK</span></span><br><span class="line"><span class="comment">#zh_CN.UTF-8 UTF-8</span></span><br><span class="line"><span class="comment">#zh_CN.GB2312</span></span><br></pre></td></tr></table></figure>
<p>然后生成更新</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">locale-gen</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'LANG=en_US.UTF-8'</span> &gt; /etc/locale.conf</span><br></pre></td></tr></table></figure>
<h3 id="设置主机名"><a href="#设置主机名" class="headerlink" title="设置主机名"></a>设置主机名</h3><blockquote>
<p>自行替换下面的 <code>HOSTNAME</code></p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> HOSTNAME &gt; /etc/hostname</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'127.0.0.1   localhost.localdomain   localhost'</span> &gt;&gt; /etc/hosts</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'::1         localhost.localdomain   localhost'</span> &gt;&gt; /etc/hosts</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'127.0.1.1   HOSTNAME.localdomain    HOSTNAME'</span>  &gt;&gt;/etc/hosts</span><br></pre></td></tr></table></figure>
<h3 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span></span><br><span class="line">umount -R /mnt</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>
<h3 id="用户设置"><a href="#用户设置" class="headerlink" title="用户设置"></a>用户设置</h3><p>重启进入ArchLinux，输入<code>root</code>，回车即可登录。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为root设置密码</span></span><br><span class="line">passwd root</span><br><span class="line"><span class="comment"># 添加普通用户,以shank为例。</span></span><br><span class="line">useradd -m -g users -s /bin/bash shank</span><br><span class="line"><span class="comment"># 设置新用户密码</span></span><br><span class="line">passwd shank</span><br><span class="line"><span class="comment"># 设置sudo权限</span></span><br><span class="line">vim /etc/sudoers</span><br><span class="line"><span class="comment"># 在root ALL=(ALL) ALL 下一行添加 shank ALL=(ALL) ALL</span></span><br><span class="line"><span class="comment"># 去掉 #%wheel ALL=(ALL) ALL 前面的‘#’号</span></span><br></pre></td></tr></table></figure>
<h2 id="桌面环境"><a href="#桌面环境" class="headerlink" title="桌面环境"></a>桌面环境</h2><h3 id="安装显卡驱动"><a href="#安装显卡驱动" class="headerlink" title="安装显卡驱动"></a>安装显卡驱动</h3><p>运行下面的命令，先确定显卡型号，记下 <code>BusID</code>，类似 <code>00:02.0 VGA ...</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep VGA</span><br></pre></td></tr></table></figure>
<p>双显卡会有些麻烦，参考官方文档<a href="https://wiki.archlinux.org/index.php/NVIDIA_Optimus" target="_blank" rel="noopener">NVIDIA_Optimus</a></p>
<p>依次运行以下命令。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果没有联网，你需要先联网</span></span><br><span class="line">wifi-menu</span><br><span class="line"><span class="comment"># intel显卡</span></span><br><span class="line">pacman -S xf86-video-intel</span><br><span class="line"><span class="comment"># nvidia显卡</span></span><br><span class="line">pacman -S nvidia nvidia-libgl</span><br><span class="line"><span class="comment"># 显示输出</span></span><br><span class="line">pacman -S xorg-xrandr</span><br><span class="line"><span class="comment"># 生成配置，将位于 /etc/X11/xorg.conf</span></span><br><span class="line">nvidia-xconfig</span><br></pre></td></tr></table></figure>
<h3 id="双显卡的配置"><a href="#双显卡的配置" class="headerlink" title="双显卡的配置"></a>双显卡的配置</h3><p>先配置xorg.conf</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/X11/xorg.conf</span><br></pre></td></tr></table></figure>
<p>参照下面内容配置N卡，<code>BusID</code>那里N卡一般是<code>PCI:1:0:0</code>,之前查到的BusID为<code>00:02.0</code>则这里填<code>PCI:0:2:0</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Section &quot;Module&quot;</span><br><span class="line">    Load &quot;modesetting&quot;</span><br><span class="line">EndSection</span><br><span class="line"></span><br><span class="line">Section &quot;Device&quot;</span><br><span class="line">    Identifier &quot;nvidia&quot;</span><br><span class="line">    Driver &quot;nvidia&quot;</span><br><span class="line">    BusID &quot;PCI:1:0:0&quot;</span><br><span class="line">    Option &quot;AllowEmptyInitialConfiguration&quot;</span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure>
<p>保存后，在编辑Intel.conf</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/X11/xorg.conf.d/20-intel.conf</span><br></pre></td></tr></table></figure>
<p>找下面内容修改，注意BusID按实际填写。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Section <span class="string">"Device"</span></span><br><span class="line">    Identifier <span class="string">"intel"</span></span><br><span class="line">    Driver <span class="string">"modesetting"</span></span><br><span class="line">    BusID <span class="string">"PCI:0:2:0"</span></span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure>
<h3 id="安装KDE桌面环境"><a href="#安装KDE桌面环境" class="headerlink" title="安装KDE桌面环境"></a>安装KDE桌面环境</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S plasma kdebase kde-l10n-zh_cn</span><br><span class="line">pacman -S xf86-input-synaptics</span><br></pre></td></tr></table></figure>
<p>修改 <a href="https://wiki.archlinux.org/index.php/NVIDIA_Optimus#Display_Managers" target="_blank" rel="noopener">Display Manager</a></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'xrandr --setprovideroutputsource modesetting NVIDIA-0'</span> &gt;&gt; /usr/share/sddm/scripts/Xsetup</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'xrandr --auto'</span> &gt;&gt; /usr/share/sddm/scripts/Xsetup</span><br></pre></td></tr></table></figure>
<p>测试是否可以进入桌面</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start sddm</span><br></pre></td></tr></table></figure>
<h3 id="桌面正常启动后"><a href="#桌面正常启动后" class="headerlink" title="桌面正常启动后"></a>桌面正常启动后</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置桌面自启动</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> sddm</span><br><span class="line"><span class="comment"># 开启桌面ＷiFi配置</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> NetworkManager</span><br><span class="line"><span class="comment"># 启动菜单添加缺失的windows启动项（可选）</span></span><br><span class="line">sudo grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
<h2 id="配置梯子"><a href="#配置梯子" class="headerlink" title="配置梯子"></a>配置梯子</h2><h3 id="安装工具"><a href="#安装工具" class="headerlink" title="安装工具"></a>安装工具</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S shadowsocks privoxy</span><br></pre></td></tr></table></figure>
<h3 id="ss配置文件"><a href="#ss配置文件" class="headerlink" title="ss配置文件"></a>ss配置文件</h3><p>编辑配置文件。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/ss-local.json</span><br></pre></td></tr></table></figure>
<p>格式如下:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"server"</span>: <span class="string">"0.0.0.0"</span>,</span><br><span class="line">    <span class="attr">"server_port"</span>: <span class="number">0000</span>,</span><br><span class="line">    <span class="attr">"password"</span>: <span class="string">"0000"</span>,</span><br><span class="line">    <span class="attr">"method"</span>: <span class="string">"aes-256-cfb"</span>,</span><br><span class="line">    <span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="attr">"local_port"</span>: <span class="number">1080</span>,</span><br><span class="line">    <span class="attr">"fast_open"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"workers"</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>移动到 <code>/etc</code>。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv ~/ss-local.json /etc/ss-local.json</span><br></pre></td></tr></table></figure>
<h3 id="测试ss连接"><a href="#测试ss连接" class="headerlink" title="测试ss连接"></a>测试ss连接</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动sslocal</span></span><br><span class="line">sudo su</span><br><span class="line">nohup sslocal -c /etc/ss-local.json &lt; /dev/null &amp;&gt;&gt; /var/<span class="built_in">log</span>/ss-local.log &amp;</span><br><span class="line"><span class="comment"># 设置临时全局代理</span></span><br><span class="line"><span class="built_in">export</span> http_proxy=<span class="string">"socks5://127.0.0.1:1080"</span>;<span class="built_in">export</span> https_proxy=<span class="variable">$http_proxy</span></span><br><span class="line"><span class="comment"># 然后访问下Google，有返回html就成了。</span></span><br><span class="line">curl -skL www.google.com</span><br></pre></td></tr></table></figure>
<h3 id="使用gfwlist选择代理"><a href="#使用gfwlist选择代理" class="headerlink" title="使用gfwlist选择代理"></a>使用gfwlist选择代理</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取 gfwlist2privoxy 脚本</span></span><br><span class="line">curl -skL https://raw.github.com/zfl9/gfwlist2privoxy/master/gfwlist2privoxy -o gfwlist2privoxy</span><br><span class="line"><span class="comment"># 生成 gfwlist.action 文件</span></span><br><span class="line">bash gfwlist2privoxy <span class="string">'127.0.0.1:1080'</span></span><br><span class="line"><span class="comment"># 拷贝至 privoxy 配置目录</span></span><br><span class="line">cp -af gfwlist.action /etc/privoxy/</span><br><span class="line"><span class="comment"># 加载 gfwlist.action 文件</span></span><br><span class="line">sudo su</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'actionsfile gfwlist.action'</span> &gt;&gt; /etc/privoxy/config</span><br><span class="line"><span class="comment"># 启动 privoxy.service 服务</span></span><br><span class="line">systemctl start privoxy.service</span><br></pre></td></tr></table></figure>
<h3 id="验证代理切换"><a href="#验证代理切换" class="headerlink" title="验证代理切换"></a>验证代理切换</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> http_proxy https_proxy no_proxy</span><br><span class="line"><span class="comment"># 设置临时变量，privoxy 默认监听端口为 8118</span></span><br><span class="line"><span class="built_in">export</span> proxy=http://127.0.0.1:8118; <span class="built_in">export</span> http_proxy=<span class="variable">$proxy</span> https_proxy=<span class="variable">$proxy</span> no_proxy=<span class="string">"localhost, 127.0.0.1, ::1"</span></span><br><span class="line"><span class="comment"># 可以看到返回值，说明代理成功</span></span><br><span class="line">curl -skL www.google.com</span><br><span class="line"><span class="comment"># 查看当前IP，若是墙内IP说明gfwlist配置成功</span></span><br><span class="line">curl -4skL http://ip.chinaz.com/getip.aspx</span><br></pre></td></tr></table></figure>
<h3 id="shell脚本的方式"><a href="#shell脚本的方式" class="headerlink" title="shell脚本的方式"></a>shell脚本的方式</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建文件</span></span><br><span class="line">touch ss-privoxy</span><br><span class="line"><span class="comment"># 赋予执行权限</span></span><br><span class="line">sudo chmod +x ss-privoxy</span><br><span class="line"><span class="comment"># 移到PATH路径</span></span><br><span class="line">mv -af ss-privoxy /usr/<span class="built_in">local</span>/bin/</span><br><span class="line"><span class="comment"># 编辑</span></span><br><span class="line">sudo vim /usr/<span class="built_in">local</span>/bin/ss-privoxy</span><br></pre></td></tr></table></figure>
<p>脚本内容如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">start)</span><br><span class="line">    nohup sslocal -c /etc/ss-local.json &lt; /dev/null &amp;&gt;&gt; /var/<span class="built_in">log</span>/ss-local.log &amp;</span><br><span class="line">    systemctl start privoxy</span><br><span class="line">    proxy=<span class="string">"http://127.0.0.1:8118"</span></span><br><span class="line">    <span class="built_in">export</span> http_proxy=<span class="variable">$proxy</span></span><br><span class="line">    <span class="built_in">export</span> https_proxy=<span class="variable">$proxy</span></span><br><span class="line">    <span class="built_in">export</span> no_proxy=<span class="string">"localhost, 127.0.0.1, ::1"</span></span><br><span class="line">    ;;</span><br><span class="line">stop)</span><br><span class="line">    <span class="built_in">unset</span> http_proxy https_proxy no_proxy</span><br><span class="line">    systemctl stop privoxy</span><br><span class="line">    pkill sslocal</span><br><span class="line">    ;;</span><br><span class="line">reload)</span><br><span class="line">    pkill sslocal</span><br><span class="line">    nohup sslocal -c /etc/ss-local.json &lt; /dev/null &amp;&gt;&gt; /var/<span class="built_in">log</span>/ss-local.log &amp;</span><br><span class="line">    ;;</span><br><span class="line"><span class="built_in">set</span>)</span><br><span class="line">    proxy=<span class="string">"http://127.0.0.1:8118"</span></span><br><span class="line">    <span class="built_in">export</span> http_proxy=<span class="variable">$proxy</span></span><br><span class="line">    <span class="built_in">export</span> https_proxy=<span class="variable">$proxy</span></span><br><span class="line">    <span class="built_in">export</span> no_proxy=<span class="string">"localhost, 127.0.0.1, ::1"</span></span><br><span class="line">    ;;</span><br><span class="line"><span class="built_in">unset</span>)</span><br><span class="line">    <span class="built_in">unset</span> http_proxy https_proxy no_proxy</span><br><span class="line">    ;;</span><br><span class="line">*)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"usage: source <span class="variable">$0</span> start|stop|reload|set|unset"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<p>配置命令别名： <code>sudo vim /etc/profile.d/ss-privoxy.sh</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> ss.start=<span class="string">'. ss-privoxy start'</span></span><br><span class="line"><span class="built_in">alias</span> ss.stop=<span class="string">'. ss-privoxy stop'</span></span><br><span class="line"><span class="built_in">alias</span> ss.reload=<span class="string">'. ss-privoxy reload'</span></span><br><span class="line"><span class="built_in">alias</span> ss.set=<span class="string">'. ss-privoxy set'</span></span><br><span class="line"><span class="built_in">alias</span> ss.unset=<span class="string">'. ss-privoxy unset'</span></span><br></pre></td></tr></table></figure>
<p>使用说明：</p>
<ul>
<li>ss.start：启动 ss-local+privoxy 代理</li>
<li>ss.stop：停用 ss-local+privoxy 代理</li>
<li>ss.reload：重载 ss-local.json 配置文件</li>
<li>ss.set：设置 shell_proxy 环境变量</li>
<li>ss.unset：删除 shell_proxy 环境变量</li>
</ul>
<h2 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h2><h3 id="分发仓库里可以找到的"><a href="#分发仓库里可以找到的" class="headerlink" title="分发仓库里可以找到的"></a>分发仓库里可以找到的</h3><p>安装前先查找软件包是否存在，以<code>ibus</code>为例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找与ibus相关的包</span></span><br><span class="line">pacman -Ss ibus</span><br><span class="line"><span class="comment"># 这里支持正则匹配的，还可以这么写，更多查看 man pacman</span></span><br><span class="line">pacman -Ss <span class="string">'^ibus-*'</span></span><br></pre></td></tr></table></figure>
<p>这里我选择安装ibus-rime输入法</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S ibus-rime</span><br></pre></td></tr></table></figure>
<h3 id="AUR中可以找到的"><a href="#AUR中可以找到的" class="headerlink" title="AUR中可以找到的"></a><a href="https://aur.archlinux.org/" target="_blank" rel="noopener">AUR</a>中可以找到的</h3><p>以安装VScode为例，该package描述页在<a href="https://aur.archlinux.org/packages/visual-studio-code-bin/" target="_blank" rel="noopener">这里</a></p>
<p>你可以复制<code>Git Clone URL</code>，然后按下面步骤安装。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先安装Git</span></span><br><span class="line">sudo pacman -S git</span><br><span class="line"><span class="comment"># 将仓库clone下来</span></span><br><span class="line">git <span class="built_in">clone</span> https://aur.archlinux.org/visual-studio-code-bin.git</span><br><span class="line"><span class="comment"># 进入git目录</span></span><br><span class="line"><span class="built_in">cd</span> visual-studio-code-bin</span><br><span class="line"><span class="comment"># 编译压缩成安装包</span></span><br><span class="line">makepkg -si</span><br><span class="line"><span class="comment"># pacman安装 (P.S XXXXXX 为版本号)</span></span><br><span class="line">sudo pacman -U visual-studio-code-bin-XXXXXX.pkg.tar.xz</span><br></pre></td></tr></table></figure>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="https://wiki.archlinux.org/index.php/Installation_guide" target="_blank" rel="noopener">Installation guide</a></li>
<li><a href="https://blog.csdn.net/maxsky/article/details/56839855" target="_blank" rel="noopener">笔记本双显卡 EFI 启动安装 ArchLinux</a></li>
<li><a href="https://www.zfl9.com/ss-local.html" target="_blank" rel="noopener">ss-local + privoxy 代理</a></li>
<li><a href="https://wiki.archlinux.org/index.php/IBus" target="_blank" rel="noopener">IBus</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"># Linux</a>
              <a href="/tags/Arch/" rel="tag"># Arch</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/05/29/DST-Server-on-Ubuntu16-04/" rel="prev" title="DST Server on Ubuntu16.04 (饥荒服务搭建指南)">
      <i class="fa fa-chevron-left"></i> DST Server on Ubuntu16.04 (饥荒服务搭建指南)
    </a></div>
      <div class="post-nav-item">
    <a href="/2018/06/09/Rime默认简体中文配置/" rel="next" title="Rime默认简体中文配置">
      Rime默认简体中文配置 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    
  <div class="comments">
    <div id="lv-container" data-id="city" data-uid="MTAyMC8zODE1OC8xNDY4OA=="></div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#系统安装"><span class="nav-number">1.</span> <span class="nav-text">系统安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#预留空间"><span class="nav-number">1.1.</span> <span class="nav-text">预留空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#U盘启动"><span class="nav-number">1.2.</span> <span class="nav-text">U盘启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分区"><span class="nav-number">1.3.</span> <span class="nav-text">分区</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装系统"><span class="nav-number">2.</span> <span class="nav-text">安装系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#挂载分区"><span class="nav-number">2.1.</span> <span class="nav-text">挂载分区</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置镜像源"><span class="nav-number">2.2.</span> <span class="nav-text">配置镜像源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#联网"><span class="nav-number">2.3.</span> <span class="nav-text">联网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#开始安装配置"><span class="nav-number">2.4.</span> <span class="nav-text">开始安装配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#本地化"><span class="nav-number">2.5.</span> <span class="nav-text">本地化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置主机名"><span class="nav-number">2.6.</span> <span class="nav-text">设置主机名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重启"><span class="nav-number">2.7.</span> <span class="nav-text">重启</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户设置"><span class="nav-number">2.8.</span> <span class="nav-text">用户设置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#桌面环境"><span class="nav-number">3.</span> <span class="nav-text">桌面环境</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装显卡驱动"><span class="nav-number">3.1.</span> <span class="nav-text">安装显卡驱动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#双显卡的配置"><span class="nav-number">3.2.</span> <span class="nav-text">双显卡的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装KDE桌面环境"><span class="nav-number">3.3.</span> <span class="nav-text">安装KDE桌面环境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#桌面正常启动后"><span class="nav-number">3.4.</span> <span class="nav-text">桌面正常启动后</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置梯子"><span class="nav-number">4.</span> <span class="nav-text">配置梯子</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装工具"><span class="nav-number">4.1.</span> <span class="nav-text">安装工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ss配置文件"><span class="nav-number">4.2.</span> <span class="nav-text">ss配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#测试ss连接"><span class="nav-number">4.3.</span> <span class="nav-text">测试ss连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用gfwlist选择代理"><span class="nav-number">4.4.</span> <span class="nav-text">使用gfwlist选择代理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#验证代理切换"><span class="nav-number">4.5.</span> <span class="nav-text">验证代理切换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shell脚本的方式"><span class="nav-number">4.6.</span> <span class="nav-text">shell脚本的方式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#软件安装"><span class="nav-number">5.</span> <span class="nav-text">软件安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#分发仓库里可以找到的"><span class="nav-number">5.1.</span> <span class="nav-text">分发仓库里可以找到的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AUR中可以找到的"><span class="nav-number">5.2.</span> <span class="nav-text">AUR中可以找到的</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考资料"><span class="nav-number">6.</span> <span class="nav-text">参考资料</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="sko00o"
      src="/uploads/avatar.jpg">
  <p class="site-author-name" itemprop="name">sko00o</p>
  <div class="site-description" itemprop="description">Nothing or Anything</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">55</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">69</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/sko00o" title="GitHub → https://github.com/sko00o" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:lwylwy@outlook.com" title="E-Mail → mailto:lwylwy@outlook.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2015 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">sko00o</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.7.0
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>




  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-firestore.js"></script>
  <script>
    firebase.initializeApp({
      apiKey: 'AIzaSyAh5G6EjuxSOyExsKAcgFnc6AMLOn75q44',
      projectId: 'myblog-1520f'
    });

    function getCount(doc, increaseCount) {
      // IncreaseCount will be false when not in article page
      return doc.get().then(d => {
        var count = 0;
        if (!d.exists) { // Has no data, initialize count
          if (increaseCount) {
            doc.set({
              count: 1
            });
            count = 1;
          }
        } else { // Has data
          count = d.data().count;
          if (increaseCount) {
            // If first view this article
            doc.set({ // Increase count
              count: count + 1
            });
            count++;
          }
        }

        return count;
      });
    }

    function appendCountTo(el) {
      return count => {
        el.innerText = count;
      }
    }
  </script>
  <script>
    (function() {
      var db = firebase.firestore();
      var articles = db.collection('articles');

      if (CONFIG.page.isPost) { // Is article page
        var title = document.querySelector('.post-title').innerText.trim();
        var doc = articles.doc(title);
        var increaseCount = CONFIG.hostname === location.hostname;
        if (localStorage.getItem(title)) {
          increaseCount = false;
        } else {
          // Mark as visited
          localStorage.setItem(title, true);
        }
        getCount(doc, increaseCount).then(appendCountTo(document.querySelector('.firestore-visitors-count')));
      } else if (CONFIG.page.isHome) { // Is index page
        var promises = [...document.querySelectorAll('.post-title')].map(element => {
          var title = element.innerText.trim();
          var doc = articles.doc(title);
          return getCount(doc);
        });
        Promise.all(promises).then(counts => {
          var metas = document.querySelectorAll('.firestore-visitors-count');
          counts.forEach((val, idx) => {
            appendCountTo(metas[idx])(val);
          });
        });
      }
    })();
  </script>




      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>



  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  <script src="/js/local-search.js"></script>












  

  

  

<script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script>

</body>
</html>
